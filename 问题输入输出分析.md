### 问题一的输入内容
问题一需使用题目提供的**161个源域轴承试验台架振动数据文件**（台架实验数据，标签完备），每个文件包含以下字段：时间（\(t\)），连续变量，单位为秒（\(s\)），表示振动信号的时间序列点；加速度（\(a(t)\)），连续变量，单位为加速度单位（如\(m/s^2\)或\(g\)），表示\(t\)时刻的振动加速度值；故障类型（\(label\)），离散变量，取值为\(\{0,1,2,3\}\)，分别对应正常、外圈故障、内圈故障、滚动体故障；轴承类型（\(type\)），离散变量，取值为\(\{SKF6205(DE), SKF6203(FE)\}\)，对应表1中的两种轴承类型；内圈转速（\(n\)），连续变量，单位为转每分钟（\(rpm\)），表示轴承内圈的运行转速。

变量定义：轴承结构参数来自表1，滚动体数（\(N_d\)）为离散变量，取值为9（两种轴承的滚动体数均为9）；滚动体直径（\(d\)）为连续变量，SKF6205为0.3126英寸，SKF6203为0.2656英寸；轴承节径（\(D\)）为连续变量，SKF6205为1.537英寸，SKF6203为1.122英寸。故障特征频率来自表2，转频（\(f_r\)）为\(f_r = \frac{n}{60}\)，单位为赫兹（\(Hz\)），表示轴承内圈每秒旋转的次数；外圈故障特征频率（\(BPFO\)）为\(BPFO = f_r \cdot \frac{N_d}{2} \cdot (1 - \frac{d}{D})\)，单位为\(Hz\)；内圈故障特征频率（\(BPFI\)）为\(BPFI = f_r \cdot \frac{N_d}{2} \cdot (1 + \frac{d}{D})\)，单位为\(Hz\)；滚动体故障特征频率（\(BSF\)）为\(BSF = f_r \cdot \frac{D}{d} \left[1 - \left(\frac{d}{D}\right)^2\right]\)，单位为\(Hz\)。特征提取中间变量：时域特征包括峰值（\(Peak = \max(|a(t)|\)）、均方根（\(RMS = \sqrt{\frac{1}{T}\int_0^T a(t)^2 dt}\)，\(T\)为信号时长）、峭度（\(Kurtosis = \frac{\frac{1}{T}\int_0^T (a(t)-\mu)^4 dt}{\sigma^4}\)，\(\mu\)为均值，\(\sigma\)为标准差）、峰值因子（\(Crest Factor = \frac{Peak}{RMS}\)）；频域特征包括频谱（\(S(f)\)，通过FFT计算）、\(S(BPFO)\)（\(BPFO\)频率处的频谱幅值）、\(S(BPFI)\)（\(BPFI\)频率处的频谱幅值）、\(S(BSF)\)（\(BSF\)频率处的频谱幅值）、重心频率（\(FC = \frac{\int_0^{f_s/2} f \cdot S(f) df}{\int_0^{f_s/2} S(f) df}\)，\(f_s\)为采样频率）、均方频率（\(MSF = \frac{\int_0^{f_s/2} f^2 \cdot S(f) df}{\int_0^{f_s/2} S(f) df}\)）；时频域特征包括时频图（\(W(t,f)\)，通过Morlet小波变换计算）、能量熵（\(Energy Entropy = -\sum \frac{E_i}{E_{total}} \log_2 \frac{E_i}{E_{total}}\)，\(E_i\)为时频图单元格能量，\(E_{total}\)为总能量）。

参数设置：源域数据筛选的转速范围为目标域转速\(n_{target} \in [1000, 3000]\)rpm，源域筛选\(n \in [800, 3200]\)rpm（偏差\(\Delta n = 200\)rpm）；源域数据筛选的故障类型数量为每个故障类型（正常、外圈、内圈、滚动体）至少保留20个文件；时域特征计算的信号时长\(T = 4\)秒（对应图1的时间范围）；频域特征计算的采样频率\(f_s = 12\)kHz（常见振动信号采样频率）；时频域特征计算的小波参数为小波基Morlet小波，尺度范围\(s = 1\)到\(64\)。

约束条件：轴承类型约束\(type \in \{SKF6205(DE), SKF6203(FE)\}\)；转速约束\(n > 0\)且\(n \in [800, 3200]\)rpm；故障类型约束\(label \in \{0,1,2,3\}\)且每个\(label\)对应的文件数量\(\geq 20\)；奈奎斯特采样约束\(f_s \geq 2 \cdot \max(BPFI)\)；小波尺度约束\(s \in \mathbb{N}^+\)且\(s \leq \frac{f_s}{2 \cdot f_{min}}\)（\(f_{min} = 10\)Hz，感兴趣的最低频率）；外圈故障时域约束为时域信号存在周期性冲击脉冲，间隔\(T_O = \frac{1}{BPFO}\)；内圈故障时域约束为时域信号存在周期性冲击脉冲，间隔\(T_I = \frac{1}{BPFI}\)；滚动体故障时域约束为时域信号存在周期性冲击脉冲，间隔\(T_B = \frac{1}{BSF}\)，且受保持架频率\(FTF = f_r \cdot \frac{1 - d/D}{2}\)调制；峭度计算约束\(\sigma > 0\)。

问题一的输出内容：筛选后的源域数据集，包含符合约束的振动时域数据（时间\(t\)、加速度\(a(t)\)）、故障类型\(label\)、轴承类型\(type\)、内圈转速\(n\)等信息；对代表性源域数据（每个故障类型选1-2个文件）的特征分析结果，包括时域特征值（峰值、均方根、峭度、峰值因子）、频谱图及特征频率幅值（\(S(BPFO)\)、\(S(BPFI)\)、\(S(BSF)\)）、时频图及能量熵；对整体筛选后数据集提取的特征矩阵，每行对应一个源域文件，每列对应一个特征，涵盖时域特征（峰值、均方根、峭度、峰值因子）、频域特征（\(S(BPFO)\)、\(S(BPFI)\)、\(S(BSF)\)、重心频率、均方频率）、时频域特征（能量熵）。

### 问题二的输入内容
问题二需使用的源域数据集为题目提供的161个轴承试验台架振动数据文件，每个文件包含的字段有时间\(t\)（单位：秒，时域信号的时间序列）、加速度\(a\)（单位：m/s²或g，时域振动信号幅值）、轴承类型（离散变量，取值为SKF6205(DE)或SKF6203(FE)）、内圈转速\(n_rpm\)（单位：rpm，轴承内圈旋转速度）、故障类型标签\(Y\)（离散变量，取值为0=正常、1=外圈故障、2=内圈故障、3=滚动体故障，台架数据标签完备）。同时使用问题一输出的源域特征数据集，该数据集为基于上述台架数据文件提取的特征向量集合，记为\(D = \{(X_i, Y_i) | i=1,2,...,161\}\)，其中\(X_i\)是样本\(i\)的特征向量，包含时域特征（峰值\(P_i\)、均方根\(RMS_i\)、峭度\(K_i\)、峰值因子\(CF_i\)）、频域特征（外圈故障特征频率峰值\(F_{BPFO,i}\)、内圈故障特征频率峰值\(F_{BPFI,i}\)、滚动体故障特征频率峰值\(F_{BSF,i}\)）、时频域特征（小波包分解能量熵\(E_i\)）；\(Y_i\)是样本\(i\)的故障类型标签。

变量定义：\(X\)为源域特征向量矩阵，维度为\(N×M\)（\(N=161\)为源域样本总数，\(M=7\)为特征维度，对应上述7个特征）；\(Y\)为源域标签向量，维度为\(N×1\)，\(Y_i∈\{0,1,2,3\}\)对应四类状态；\(X_train\)为源域训练集特征矩阵，\(X_test\)为源域测试集特征矩阵；\(Y_train\)为源域训练集标签向量，\(Y_test\)为源域测试集标签向量。

参数设置：训练集-测试集划分比例\(\alpha=0.8\)（训练集占80%，测试集占20%），即\(X_train\)包含约129个样本，\(X_test\)包含约32个样本；诊断模型结构为CNN（假设特征为时频图），输入层维度\(28×28×1\)（时频图的高度×宽度×通道数），卷积层1为32个\(3×3\)滤波器，步长1，填充1，激活函数ReLU，池化层1为最大池化，池化大小\(2×2\)，步长2，卷积层2为64个\(3×3\)滤波器，步长1，填充1，激活函数ReLU，池化层2为最大池化，池化大小\(2×2\)，步长2，全连接层1为128个节点，激活函数ReLU，Dropout率0.5，输出层为4个节点，激活函数Softmax；训练参数为优化器Adam，学习率\(lr=0.001\)，批大小\(batch_size=32\)，训练轮数\(epoch=50\)，损失函数为交叉熵损失\(L = -Σ_{c=0}^3 Y_{i,c} log(Ŷ_{i,c})\)（\(Y_{i,c}\)为样本\(i\)在类别\(c\)的真实标签，\(Ŷ_{i,c}\)为模型预测概率）。

约束条件：标签一致性约束（源域数据的标签\(Y_i\)与台架实验真实故障类型一致）；特征频率计算约束（频域特征中的\(F_{BPFO,i}\)、\(F_{BPFI,i}\)、\(F_{BSF,i}\)基于表2公式计算，转频\(f_r = n_rpm / 60\)，外圈故障特征频率\(BPFO = f_r · N_d/2 · (1 - d/D)\)，内圈故障特征频率\(BPFI = f_r · N_d/2 · (1 + d/D)\)，滚动体故障特征频率\(BSF = f_r · D/d · [1 - (d/D)^2]\)，其中\(N_d=9\)、\(d\)和\(D\)来自表1对应轴承类型）；分层划分约束（训练集与测试集的类别分布与源域整体一致，对任意类别\(c∈\{0,1,2,3\}\)，有\(|Y_train中c的数量| / |Y中c的数量| = α\)）；模型输出约束（模型预测概率\(Ŷ_{i,c}\)满足\(Σ_{c=0}^3 Ŷ_{i,c} = 1\)）。

问题二的输出内容：源域训练集与测试集的划分结果，包括训练集和测试集的样本数量，以及各类别（正常、外圈故障、内圈故障、滚动体故障）在两个集合中的分布情况；源域故障诊断模型的结构描述，包括模型的层级结构（卷积层、池化层、全连接层的数量及参数）、激活函数、优化器、损失函数等；模型在源域测试集上的分类性能评价结果，包括整体准确率\(Acc\)，各类别的精确率\(P_c\)、召回率\(R_c\)、F1-score\(F1_c\)（\(c=0,1,2,3\)对应四类状态）；模型分类结果的混淆矩阵，展示模型对四类状态的预测结果与真实标签的匹配情况；模型训练过程的可视化结果，包括训练集与验证集的损失曲线（随训练轮数变化的损失值）、准确率曲线（随训练轮数变化的分类准确率）。

### 问题三的输入内容
问题三需使用问题二输出的源域故障诊断模型，该模型的结构描述为：输入层维度\(28×28×1\)（时频图的高度×宽度×通道数），卷积层1为32个\(3×3\)滤波器，步长1，填充1，激活函数ReLU，池化层1为最大池化，池化大小\(2×2\)，步长2，卷积层2为64个\(3×3\)滤波器，步长1，填充1，激活函数ReLU，池化层2为最大池化，池化大小\(2×2\)，步长2，全连接层1为128个节点，激活函数ReLU，Dropout率0.5，输出层为4个节点，激活函数Softmax；优化器为Adam，学习率\(lr=0.001\)；损失函数为交叉熵损失\(L = -Σ_{c=0}^3 Y_{i,c} log(Ŷ_{i,c})\)。同时使用目标域数据集，该数据集为题目提供的16个实际轴承故障数据文件，每个文件包含的字段有时间\(t\)（单位：秒，时域信号的时间序列）、加速度\(a(t)\)（单位：m/s²或g，\(t\)时刻的振动加速度值）、轴承类型\(type\)（离散变量，取值为SKF6205(DE)或SKF6203(FE)）、内圈转速\(n\)（连续变量，单位：rpm，轴承内圈的运行转速）；目标域数据无故障类型标签。还需使用问题一输出的特征提取方法，包括时域特征（峰值、均方根、峭度、峰值因子）、频域特征（\(S(BPFO)\)、\(S(BPFI)\)、\(S(BSF)\)、重心频率、均方频率）、时频域特征（时频图、能量熵）的提取方法及参数（时域特征计算信号时长\(T=4\)秒，频域特征采样频率\(f_s=12\)kHz，时频域特征小波基Morlet小波、尺度范围\(s=1\)到\(64\)）。

变量定义：迁移诊断模型的特征提取器为问题二源域模型的特征提取部分（卷积层1、池化层1、卷积层2、池化层2、全连接层1）；分类器为问题二源域模型的输出层；域分类器为全连接层1（64个节点，激活函数ReLU）、全连接层2（32个节点，激活函数ReLU）、输出层（2个节点，激活函数Softmax，区分源域和目标域）；源域特征矩阵\(X_s\)为问题一输出的源域特征数据集的特征向量矩阵，维度\(N_s×M\)（\(N_s=161\)为源域样本数，\(M=7\)为特征维度）；目标域特征矩阵\(X_t\)为基于问题一特征提取方法对目标域数据提取的特征向量矩阵，维度\(N_t×M\)（\(N_t=16\)为目标域样本数）；源域标签向量\(Y_s\)为问题二的源域标签向量，维度\(N_s×1\)；域标签向量\(D_s\)为源域样本的域标签（取值为0，代表源域），维度\(N_s×1\)；域标签向量\(D_t\)为目标域样本的域标签（取值为1，代表目标域），维度\(N_t×1\)。

参数设置：迁移学习方法为域对抗网络；域分类器结构为全连接层1（64节点，ReLU）、全连接层2（32节点，ReLU）、输出层（2节点，Softmax）；对抗训练参数为域分类损失权重\(λ=0.1\)；优化器为Adam，学习率\(lr=0.001\)；批大小\(batch_size=32\)；训练轮数\(epoch=50\)；总损失函数为\(L_total = L_cls + λ×L_domain\)（\(L_cls\)为源域分类交叉熵损失，\(L_domain\)为域分类交叉熵损失）。

约束条件：源域模型参数初始化约束（迁移模型的特征提取器初始化为问题二源域模型的特征提取器参数）；域对齐约束（源域和目标域的特征分布差异通过域分类损失最小化，即\(L_domain = -Σ_{k=0}^1 D_{i,k} log(Ĉ_{i,k})\)，\(D_{i,k}\)为样本\(i\)的域真实标签，\(Ĉ_{i,k}\)为域分类器预测概率）；目标域样本预测约束（模型对目标域样本的预测概率满足\(Σ_{c=0}^3 Ŷ_{i,c}=1\)）；特征提取一致性约束（目标域特征提取方法与问题一的源域特征提取方法一致，包括时域特征计算信号时长\(T=4\)秒，频域特征采样频率\(f_s=12\)kHz，时频域特征小波基Morlet小波、尺度范围\(s=1\)到\(64\)）。

问题三的输出内容：目标域诊断模型的结构描述，包括特征提取器、分类器、域分类器的层级结构及参数；目标域数据的分类和标定结果，包括每个目标域样本的预测故障类型标签（取值为0=正常、1=外圈故障、2=内圈故障、3=滚动体故障）；迁移结果的可视化展示，包括源域与目标域的特征分布对齐图（如t-SNE降维后的特征分布）、目标域样本的预测概率直方图；迁移结果的分析，包括目标域样本各类别预测的分布情况、迁移模型的域对齐效果（如源域与目标域的特征分布差异度量值，如MMD距离）。

### 问题四的输入内容
问题四需使用问题三输出的迁移诊断模型，该模型的结构描述为：特征提取器（输入层维度\(28×28×1\)，卷积层1为32个\(3×3\)滤波器，步长1，填充1，激活函数ReLU，池化层1为最大池化\(2×2\)，步长2，卷积层2为64个\(3×3\)滤波器，步长1，填充1，激活函数ReLU，池化层2为最大池化\(2×2\)，步长2，全连接层1为128个节点，激活函数ReLU，Dropout率0.5）、分类器（输出层4个节点，激活函数Softmax）、域分类器（全连接层1为64个节点，激活函数ReLU，全连接层2为32个节点，激活函数ReLU，输出层2个节点，激活函数Softmax）；迁移过程的损失函数为\(L_total = L_cls + λ×L_domain\)（\(L_cls\)为源域分类交叉熵损失，\(L_domain\)为域分类交叉熵损失，\(λ=0.1\)）；训练参数为优化器Adam，学习率\(lr=0.001\)，批大小\(batch_size=32\)，训练轮数\(epoch=50\)；决策过程为模型对目标域样本的分类决策基于特征提取器输出的特征向量，通过分类器计算各类别概率，取最大概率对应的类别作为预测标签。同时使用轴承故障机理，包括外圈故障对应时域周期性冲击（间隔\(T_O = \frac{1}{BPFO}\)）、频域\(BPFO\)处频谱峰值；内圈故障对应时域周期性冲击（间隔\(T_I = \frac{1}{BPFI}\)）、频域\(BPFI\)处频谱峰值；滚动体故障对应时域周期性冲击（间隔\(T_B = \frac{1}{BSF}\)）且受保持架频率\(FTF = f_r \cdot \frac{1 - d/D}{2}\)调制、频域\(BSF\)处频谱峰值；正常轴承对应时域平稳信号、频域无显著特征峰值。还需使用问题一的特征提取方法及特征定义，包括时域特征（峰值、均方根、峭度、峰值因子）、频域特征（\(S(BPFO)\)、\(S(BPFI)\)、\(S(BSF)\)、重心频率、均方频率）、时频域特征（能量熵）的定义及物理意义。

变量定义：可解释性分析的对象包括模型结构的可解释性（特征提取器各层提取的特征与故障机理的关联）、迁移过程的可解释性（域对抗损失的变化与域对齐效果的关联）、决策过程的可解释性（特征重要性与故障类型的关联）；SHAP值（SHapley Additive exPlanations）用于量化每个特征对模型决策的贡献；域分类损失\(L_domain\)用于度量源域与目标域的特征分布差异；特征重要性得分用于表示每个故障特征（如\(S(BPFO)\)、\(S(BPFI)\)）对模型分类决策的影响程度。

参数设置：SHAP值计算的参数为背景数据集取源域特征矩阵的前100个样本；特征重要性分析的特征集合为问题一的特征（时域4个、频域5个、时频域1个）；域对齐效果分析的度量指标为最大均值差异（MMD），计算公式为\(MMD(X_s, X_t) = ||\frac{1}{N_s}Σ_{i=1}^{N_s} φ(X_{s,i}) - \frac{1}{N_t}Σ_{j=1}^{N_t} φ(X_{t,j})||^2\)（\(φ\)为特征提取器的输出特征映射）。

约束条件：可解释性分析的一致性约束（分析结果需与轴承故障机理一致，如外圈故障的特征重要性得分中\(S(BPFO)\)应显著高于其他特征）；SHAP值计算约束（背景数据集需为源域代表性样本，确保SHAP值的稳定性）；MMD计算约束（特征映射\(φ\)需为迁移模型的特征提取器输出，确保度量的是模型提取的特征分布差异）。

问题四的输出内容：迁移诊断的可解释性分析结果，包括事前可解释性（模型结构设计与故障机理的关联分析，如卷积层提取的时频特征对应故障特征频率的物理意义）、迁移过程可解释性（域对抗损失随训练轮数的变化曲线分析，说明域对齐的过程及效果）、事后可解释性（使用SHAP值分析目标域样本分类决策的特征重要性，展示关键特征与故障类型的关联）；可解释性分析的可视化结果，包括SHAPsummaryplot（展示所有特征对模型决策的平均影响）、域对抗损失曲线（随训练轮数变化的损失值）、特征重要性直方图（各类别故障的关键特征得分）；可解释性分析的结论，说明迁移模型的决策依据与轴承故障机理的一致性，以及迁移过程的透明性。
